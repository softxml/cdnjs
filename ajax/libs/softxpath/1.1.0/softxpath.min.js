function SoftXpath(){var l=(typeof document.implementation!="undefined")&&(typeof document.implementation.createDocument!="undefined");var h=false;var g=(l||h?document.implementation.createDocument("","doc",null):new ActiveXObject("MSXML2.DOMDocument.3.0"));var k=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;var i=navigator.userAgent.toLowerCase().indexOf("safari")>-1;var j=navigator.userAgent.toLowerCase().indexOf("k-meleon")>-1;var a=this;var b="";var e="";var c=/\//gi;var d=/\/\//i;reservedXpathKeywords=["ancestor","ancestor-or-self","attribute","child","descendant","descendant-or-self","following","following-sibling","namespace","parent","preceding","preceding-sibling","self"];this.registerNamespace=function(m,n){b=m;e=n};function f(m){for(var n=0;n<reservedXpathKeywords.length;n++){if(String(reservedXpathKeywords[n])==m){return true}}return false}this.load=function(o){var m=false;g.async=false;if(h){try{g=ls.parseURI(o);m=(g.documentElement.nodeName=="parsererror"?false:true)}catch(p){m=false}}else{if(k||i||j){var n=new XMLHttpRequest();n.open("GET",o,false);n.send(null);try{g=n.responseXML.documentElement;return true}catch(p){return false}}else{try{m=g.load(o)}catch(p){return false}}}return m};this.loadXML=function(n){var m=false;if(l||h){var o=new DOMParser();g=o.parseFromString(n,"text/xml");m=(g.documentElement.nodeName=="parsererror"?false:true)}else{m=g.loadXML(n)}return m};this.selectNodes=function(q){var t="";var w="";var n=new Array();var s=q.match(d);if(b!=""){var p=String(q).split(c);for(var o=0;o<p.length;o++){if(p[o].substring(0,1)!="@"){if(p[o]>""){if(o>0&&!f(String(p[o-1]).split("::")[1])){if(typeof String(p[o]).split("::")[1]!="undefined"){t+=String(p[o]).split("::")[0]+"::"+b+":"+String(p[o]).split("::")[1]+"/"}else{t+=b+":"+p[o]+"/"}}else{t+=b+":"+p[o]+"/"}}}else{t+=p[o]+"/"}}t=t.substring(0,t.length-1)}else{t=q}if(s!=null){if(b!=""){w=s+t}else{w=t}}if(l){var v=new XMLSerializer();var u=new XPathEvaluator();var m=(new XPathEvaluator()).createNSResolver(g.ownerDocument==null?g.documentElement:g.ownerDocument.documentElement);try{var x=(q>""?u.evaluate(w,g,m,0,null):"0")}catch(r){return n}if(x!="0"){while(res=x.iterateNext()){try{xmstr=v.serializeToString(res)}catch(r){xmstr=""}n[n.length]={nodeName:res.nodeName,text:res.textContent,me:{_:res,xml:xmstr}}}}}else{try{try{g.setProperty("SelectionNamespaces","xmlns:"+b+"='"+e+"'");g.setProperty("SelectionLanguage","XPath")}catch(r){}nodes=g.selectNodes(w);for(o=0;o<nodes.length;o++){n[o]={nodeName:nodes[o].nodeName,text:nodes[o].childNodes[0].nodeValue,me:{_:nodes[o],xml:nodes[o].xml}}}}catch(r){}}return n}};
